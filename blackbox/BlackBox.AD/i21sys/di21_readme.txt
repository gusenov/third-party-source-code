Пакет русификации и исправлений di21 

От 2009-10-04 для BlackBox Component Builder 1.5

Пакет подготовлен Ф.В.Ткачевым для проекта Информатика-21 (http://www.inr.ac.ru/~info21/) на основе пакета Delta, собранного в январе 2008 г. в ООО ОЦПИ "Метасистемы" (http://oberoncore.ru). 
При этом для пакета di21: 
	2009-10-17: модифицированы модули DevSearch, DevReferences,
	произведена небольшая чистка пакета,
	просмотрены все исходники (см. ниже список модулей после DevCompiler.CompileThis; каждый исходник помечен соотв. комментарием),
	сделаны соотв. добавления в документе System/Rsrc/About.odc,
	добавлен данный документ.
Вошедшие в пакет Delta русификация и исправления выполнены участниками проекта Информатика-21.

Архив di21, доступный с сайта проекта Информатика-21, содержит **только исходники**.

***********************************************************************
ИНСТРУКЦИЯ
по включению пакета di21 в инсталляцию Блэкбокса.

--0--
Предполагается, что BlackBox уже инсталлирован из файла SetupBlackBox15.exe (6.59MB), который можно скачать либо с сайта компании Oberon microsystems, Inc. (http://www.oberon.ch/zip/SetupBlackBox15.exe), либо, например, отсюда: http://www.inr.ac.ru/~blackbox/rsrc/SetupBlackBox15.exe.

--1--
Пусть инсталляция произведена в папку "C:\Program Files\BlackBox Component Builder 1.5"; в этой папке должен обнаруживаться файл BlackBox.exe. Эту папку ниже называем первичной папкой.

--2--
В любом месте на диске создать новую папку, например, C:\BlackBox.2. 
Эту папку будем называть вторичной.
Разархивировать в нее содержимое архива di21. 
В итоге в этой вторичной папке должны обнаруживаться папки Dev, Host, ...,
а также файлы di21_readme.txt (данный файл) и di21_readme.odc.

--3--
Создать во вторичной папке ярлык (lnk) для вышеупомянутого файла BlackBox.exe.
Открыть ярлык (Ctrl+Enter).
В первом текстовом поле (в англоязычной версии Target) должна содержаться следующая строка литер, включая кавычки:

"C:\Program Files\BlackBox Component Builder 1.5\BlackBox.exe"

После закрывающей двойной кавычки через пробел добавить 

/Use "C:\BlackBox.2"

В результате содержимое поля должно выглядеть так:

"C:\Program Files\BlackBox Component Builder 1.5\BlackBox.exe" /Use "C:\BlackBox.2"

Во второе текстовое поле ярлыка (в англоязычной версии Start in) скопировать "C:\BlackBox.2"
В результате содержимое поля должно выглядеть так:

"C:\BlackBox.2"

Сохранить измененный ярлык.

--4--
Запустить Блэкбокс с помощью этого ярлыка и убедиться, что при попытке открыть файл (Ctrl+O или File, Open) диалог открывается во вторичной папке. 
Открыть файл di21_readme.odc, увидеть там эту же инструкцию, прочесть ее до этого же места и дальше действовать по ней.

--6--
Для компиляции модулей пакета: кликнуть по следующему коммандеру (черный кружок с восклицательным знаком; начиная с National перечислены имена компилируемых модулей до закрывающего черного треугольничка.), и ответить OK на все вопросы о создании новых папок (все они создаются во вторичной папке; все новые файлы появляются только во вторичной папке): 

DevCompiler.CompileThis 
National Kernel HostFiles
Config Controls Dialog Meta Strings
HostPrinters HostDialog HostFonts HostWindows HostMenus HostPackedFiles HostPorts HostTextConv
DevCommanders DevCPS DevDebug DevMarkers DevPacker DevRBrowser DevSubTool DevReferences DevSearch 
OleData
SqlDB SqlControls
StdCmds StdInterpreter StdScrollers
TextControllers TextMappers TextSetters
XhtmlEntitySets

--7--
Для создания русифицированного BlackBox.exe кликнуть по следующему коммандеру:

DevLinker.Link
BlackBox.exe := National Kernel$+ Files HostFiles StdLoader
1 Applogo.ico 2 Doclogo.ico 3 SFLogo.ico 4 CFLogo.ico 5 DtyLogo.ico
1 Move.cur 2 Copy.cur 3 Link.cur 4 Pick.cur 5 Stop.cur 6 Hand.cur 7 Table.cur

В окошке Log должна появиться запись:
BlackBox.exe written  87040  39826

В результате во вторичной папке должен появиться файл BlackBox.exe.

Продолжить со следующего пункта по текстовому файлу di21_readme.txt во вторичной папке.

--8--
Закрыть Блэкбокс.

--9--
Во вторичной папке Блэкбокса переместить папки Code (для проверки: в ней должны быть файлы Config.ocf ... Strings.ocf) и Sym (для проверки: в ней должен быть единственный файл National.osf) в папку System (т.е. на один уровень глубже). Во вторичной папке на верхнем уровне этих двух папок остаться не должно.

--10--
Скопировать все содержимое вторичной папки в первичную, заменяя соответствующие файлы (во вторичной папке можно удалить все, кроме ярлыка).
Теперь при запуске Блэкбокса как в первичной папке (двойным кликом по BlackBox.exe), так и с помощью ярлыка во вторичной папке, будем иметь Блэкбокс, в котором активированы все исправления пакета di21.

Pапустить Блэкбокс с помощью ярлыка во вторичной папке и убедиться (открыв, например, данный документ), что Блэкбокс при нажатии Ctrl+стрелки влево/вправо корректно различает начало слов, не "спотыкаясь" на буквах ц, р, ч, ё. 
Можно также создать модуль с названиями модуля и процедур из русских букв и убедиться, что компиляция, загрузка и выполнение работают корректно.

***************************
***************************
***************************
